# –ü–æ–ª—É—á–∞–µ–º –Ω–∞–∂–∞—Ç—É—é –∫–ª–∞–≤–∏—à—É –≤ C#

–ò–Ω–æ–≥–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –±—ã–≤–∞–µ—Ç –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞–∂–∞—Ç—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∫–ª–∞–≤–∏—à–∞—Ö. –î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ç–æ–¥ [ReadKey()](https://learn.microsoft.com/ru-ru/dotnet/api/system.console.readkey).

## –ß—Ç–æ —Ç–∞–∫–æ–µ ReadKey() –∏ –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω? {id="readkey_1"}

–ú–µ—Ç–æ–¥ `ReadKey()` –≤ C# –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è –Ω–∞–∂–∞—Ç–æ–π –∫–ª–∞–≤–∏—à–∏ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –∫–æ–Ω—Å–æ–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏. –ö–æ–≥–¥–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –≤—ã–∑—ã–≤–∞–µ—Ç `ReadKey()`, –æ–Ω–∞ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∏ –∂–¥—ë—Ç, –ø–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–º—ë—Ç –ª—é–±—É—é –∫–ª–∞–≤–∏—à—É. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –º–µ—Ç–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞–∂–∞—Ç–æ–π –∫–ª–∞–≤–∏—à–µ.

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –≤–∞—à –∫–æ–º–ø—å—é—Ç–µ—Ä —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç: *"–ö–∞–∫–∞—è –∫–ª–∞–≤–∏—à–∞ –±—ã–ª–∞ –Ω–∞–∂–∞—Ç–∞?"* ‚Äì –∏ –∂–¥—ë—Ç –æ—Ç–≤–µ—Ç–∞. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –≤—ã –Ω–∞–∂–º—ë—Ç–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, `A`, –ø—Ä–æ–≥—Ä–∞–º–º–∞ —É–∑–Ω–∞–µ—Ç –æ–± —ç—Ç–æ–º –∏ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–º –≤ –∏–≥—Ä–µ –∏–ª–∏ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥.

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç ReadKey()? {id="readkey_2"}

–í–æ—Ç –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä –∫–æ–¥–∞:

```c#
using System;

class Program
{
    static void Main()
    {
        Console.Write("–ù–∞–∂–º–∏—Ç–µ –ª—é–±—É—é –∫–ª–∞–≤–∏—à—É: ");
        ConsoleKeyInfo key = Console.ReadKey(); // –û–∂–∏–¥–∞–Ω–∏–µ –≤–≤–æ–¥–∞
        Console.WriteLine();
        Console.WriteLine("–í—ã –Ω–∞–∂–∞–ª–∏: {0}", key.Key);
    }
}
```

–ö–æ–≥–¥–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –¥–æ—Ö–æ–¥–∏—Ç –¥–æ `Console.ReadKey()`, –æ–Ω–∞ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∏ –∂–¥—ë—Ç –≤–≤–æ–¥–∞. –ï—Å–ª–∏ –≤—ã –Ω–∞–∂–º—ë—Ç–µ `B`, –ø—Ä–æ–≥—Ä–∞–º–º–∞ –≤—ã–≤–µ–¥–µ—Ç:

```
–ù–∞–∂–º–∏—Ç–µ –ª—é–±—É—é –∫–ª–∞–≤–∏—à—É: B
–í—ã –Ω–∞–∂–∞–ª–∏: B
```

## –ß—Ç–æ –µ—â—ë –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å –æ –Ω–∞–∂–∞—Ç–æ–π –∫–ª–∞–≤–∏—à–µ?

–ú–µ—Ç–æ–¥ `ReadKey()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç `ConsoleKeyInfo`, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç—Ä–∏ –≤–∞–∂–Ω—ã—Ö —Å–≤–æ–π—Å—Ç–≤–∞:
- `Key` ‚Äì –∫–∞–∫–∞—è –∫–ª–∞–≤–∏—à–∞ –±—ã–ª–∞ –Ω–∞–∂–∞—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `A`, `Enter`, `F1`).
- `KeyChar` ‚Äì —Å–∏–º–≤–æ–ª, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –Ω–∞–∂–∞—Ç–æ–π –∫–ª–∞–≤–∏—à–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `a`, `b`, `1`).
- `Modifiers` ‚Äì –±—ã–ª–∏ –ª–∏ –Ω–∞–∂–∞—Ç—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–ª–∞–≤–∏—à–∏, —Ç–∞–∫–∏–µ –∫–∞–∫ `Shift`, `Ctrl` –∏–ª–∏ `Alt`.

–ü—Ä–∏–º–µ—Ä:
```c#
ConsoleKeyInfo key = Console.ReadKey();
Console.WriteLine("Key: {0}, Char: {1}, Modifiers: {2}", key.Key, key.KeyChar, key.Modifiers);
```

–ï—Å–ª–∏ –≤—ã –Ω–∞–∂–º—ë—Ç–µ `Shift + K`, –ø—Ä–æ–≥—Ä–∞–º–º–∞ –≤—ã–≤–µ–¥–µ—Ç:
```
Key: K, Char: K, Modifiers: Shift
```

–ï—Å–ª–∏ –≤—ã –Ω–∞–∂–º—ë—Ç–µ `F12`, –ø—Ä–æ–≥—Ä–∞–º–º–∞ –≤—ã–≤–µ–¥–µ—Ç:
```
Key: F12, Char: , Modifiers: 0
```
(—Å–∏–º–≤–æ–ª –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ `F12` ‚Äì —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∫–ª–∞–≤–∏—à–∞, –∏ —É –Ω–µ—ë –Ω–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è).

## –ì–¥–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ReadKey()?

–ú–µ—Ç–æ–¥ `ReadKey()` –ø–æ–ª–µ–∑–µ–Ω –≤:
- –í –∫–æ–Ω—Å–æ–ª—å–Ω—ã—Ö –∏–≥—Ä–∞—Ö (–Ω–æ —Å–æ–≤–º–µ—Å—Ç–Ω–æ —Å –º–µ–¥–æ–¥–æ–º `Console.KeyAvailable()`), –≥–¥–µ –∏–≥—Ä–æ–∫ —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–º, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–≤–∏–≥–∞–µ—Ç –∫–æ—Å–º–∏—á–µ—Å–∫–∏–π –∫–æ—Ä–∞–±–ª—å –∏ —Å—Ç—Ä–µ–ª—è–µ—Ç –≤ –º–µ—Ç–µ–æ—Ä–∏—Ç—ã.
- –í –∫–æ–Ω—Å–æ–ª—å–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º –º–µ–Ω—é, –≥–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –æ–ø—Ü–∏–∏ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã.
- –ö–æ–Ω—Å–æ–ª—å–Ω—ã—Ö —É—Ç–∏–ª–∏—Ç–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ –æ–∂–∏–¥–∞—é—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ–º.

–ü—Ä–∞–∫—Ç–∏–∫–∞!

–°–æ–∑–¥–∞–π –∫–æ–Ω—Å–æ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ `ex0077_readkey` –ø—Ä–∏ –ø–æ–º–æ—â–∏ —à–∞–±–ª–æ–Ω–∞ `tinyconsole` –≤ –ø–∞–ø–∫–µ `episode02` –∏ –¥–æ–±–∞–≤—å –µ–≥–æ –≤
—Ñ–∞–π–ª —Ä–µ—à–µ–Ω–∏—è `episode02.sln`. –≠—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∫–∞–∫ –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ, —Ç–∞–∫ –∏ –≤ –ª—é–±–æ–π IDE.

–ü—Ä–∏–≤–µ–¥–∏ Program.cs –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –≤–∏–¥—É:

```c#
using System;

class Program
{
    static void Main()
    {
        WriteLine("–ù–∞–∂–∏–º–∞–π—Ç–µ –∫–ª–∞–≤–∏—à–∏. –î–ª—è –≤—ã—Ö–æ–¥–∞ –Ω–∞–∂–º–∏—Ç–µ Esc.");
        
        while (true)
        {
            ConsoleKeyInfo key = ReadKey(true); // true –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∫–ª–∞–≤–∏—à–∞ –Ω–µ –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ –∫–æ–Ω—Å–æ–ª–∏
            WriteLine("Key: {0}, Char: {1}, Modifiers: {2}", key.Key, key.KeyChar, key.Modifiers);
            
            if (key.Key == ConsoleKey.Escape)
            {
                WriteLine("–í—ã –Ω–∞–∂–∞–ª–∏ Esc. –ó–∞–≤–µ—Ä—à–∞–µ–º –ø—Ä–æ–≥—Ä–∞–º–º—É...");
                break;
            }
        }
    }
}
```

–¢–µ–ø–µ—Ä—å –ø—Ä–æ–≥—Ä–∞–º–º–∞ –±—É–¥–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –≤—ã–≤–æ–¥–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞–∂–∞—Ç—ã—Ö –∫–ª–∞–≤–∏—à–∞—Ö, –ø–æ–∫–∞ –≤—ã –Ω–µ –Ω–∞–∂–º—ë—Ç–µ `Esc`.

#### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã:

```
–ù–∞–∂–∏–º–∞–π—Ç–µ –∫–ª–∞–≤–∏—à–∏. –î–ª—è –≤—ã—Ö–æ–¥–∞ –Ω–∞–∂–º–∏—Ç–µ Esc.
Key: A, Char: A, Modifiers: Shift
Key: F, Char: f, Modifiers: Alt
Key: H, Char:, Modifiers: Shift, Control
Key: Z, Char: , Modifiers: Alt, Shift, Control
Key: D, Char: , Modifiers: Alt, Shift, Control
Key: Escape, Char: odifiers: None
–í—ã –Ω–∞–∂–∞–ª–∏ Esc. –ó–∞–≤–µ—Ä—à–∞–µ–º –ø—Ä–æ–≥—Ä–∞–º–º—É...
```

> –í–Ω–∏–º–∞–Ω–∏! –ï—Å–ª–∏ –≤—ã –±—É–¥–µ—Ç–µ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É –∏–∑ –∫–∞–∫–æ–π-–ª–∏–±–æ IDE, –≤ Windows Terminal –∏–ª–∏ –¥–∞–∂–µ –∫–æ–Ω—Å–æ–ª–∏ cmd Windows, —Ç–æ —ç—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã –º–æ–≥—É—Ç 
> –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—Ç—å –Ω–∞–∂–∞—Ç–∏—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –∫–ª–∞–≤–∏—à. –ö–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —è–≤–ª—è—Ç—å—Å—è –∏—Ö –≥–æ—Ä—è—á–∏–º–∏ –∫–ª–∞–≤–∏—à–∞–º–∏. –ü–æ—ç—Ç–æ–º—É
> –ø—Ä–æ–≥—Ä–∞–º–º–∞ –º–æ–∂–µ—Ç –∏—Ö –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å.
> {style="warning"}

## –ö–∞–∫ –ø–æ–ª—É—á–∞—Ç—å –Ω–∞–∂–∞—Ç–∏—è –∫–ª–∞–≤–∏—à –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã

–û–±—ã—á–Ω–æ, –∫–æ–≥–¥–∞ –º—ã —Ö–æ—Ç–∏–º —Å—á–∏—Ç–∞—Ç—å –Ω–∞–∂–∞—Ç–∏–µ –∫–ª–∞–≤–∏—à–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏, –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –º–µ—Ç–æ–¥ `Console.ReadKey()`. –ù–æ —É –Ω–µ–≥–æ –µ—Å—Ç—å –æ–¥–∏–Ω –±–æ–ª—å—à–æ–π –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ ‚Äî **–æ–Ω –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã, –ø–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–∂–º—ë—Ç –∫–ª–∞–≤–∏—à—É**.

–ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ç—ã –ø–∏—à–µ—à—å –∏–≥—Ä—É, –∏ —Ç–≤–æ–π –≥–µ—Ä–æ–π –¥–æ–ª–∂–µ–Ω –¥–≤–∏–≥–∞—Ç—å—Å—è, –Ω–æ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–≤–∏—Å–∞–µ—Ç, –ø–æ–∫–∞ –∂–¥—ë—Ç –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏. –≠—Ç–æ –ø–ª–æ—Ö–æ! –ß—Ç–æ–±—ã —ç—Ç–æ–≥–æ –∏–∑–±–µ–∂–∞—Ç—å, –µ—Å—Ç—å –¥–≤–∞ –ø–æ–ª–µ–∑–Ω—ã—Ö –º–µ—Ç–æ–¥–∞:

‚úÖ `Console.KeyAvailable` ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–∞–∂–∞—Ç–∞ –ª–∏ –∫–ª–∞–≤–∏—à–∞, –Ω–æ **–Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º—É**.  
‚úÖ `Console.ReadKey(true)` ‚Äî —Å—á–∏—Ç—ã–≤–∞–µ—Ç –∫–ª–∞–≤–∏—à—É, –Ω–æ **–Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –µ—ë –≤ –∫–æ–Ω—Å–æ–ª–∏**.

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

–ö–æ–≥–¥–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –æ–Ω–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–º —Ü–∏–∫–ª–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –∏–≥—Ä–æ–≤–æ–π –ª–æ–≥–∏–∫–µ). –ù–æ –º—ã —Ö–æ—Ç–∏–º, —á—Ç–æ–±—ã –Ω–∞–∂–∞—Ç–∏–µ –∫–ª–∞–≤–∏—à–∏ –Ω–µ —Ç–æ—Ä–º–æ–∑–∏–ª–æ –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å.

–î–∞–≤–∞–π –ø–æ–ø—Ä–∞–∫—Ç–∏–∫—É–µ–º—Å—è, –ø–∞–¥–∞–≤–∞–Ω!

–°–æ–∑–¥–∞–π –∫–æ–Ω—Å–æ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ `ex0078_readkey_available` –ø—Ä–∏ –ø–æ–º–æ—â–∏ —à–∞–±–ª–æ–Ω–∞ `tinyconsole` –≤ –ø–∞–ø–∫–µ `episode02` –∏ –¥–æ–±–∞–≤—å –µ–≥–æ –≤
—Ñ–∞–π–ª —Ä–µ—à–µ–Ω–∏—è `episode02.sln`. –≠—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∫–∞–∫ –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ, —Ç–∞–∫ –∏ –≤ –ª—é–±–æ–π IDE.



```c#
using System;
using System.Threading;

class Program
{
    static void Main()
    {
        WriteLine("–ù–∞–∂–∏–º–∞–π—Ç–µ –∫–ª–∞–≤–∏—à–∏ (Esc - –≤—ã—Ö–æ–¥).");

        while (true)
        {
            if (KeyAvailable) // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –Ω–∞–∂–∞—Ç–∞—è –∫–ª–∞–≤–∏—à–∞
            {
                ConsoleKeyInfo key = ReadKey(true); // –ß–∏—Ç–∞–µ–º –∫–ª–∞–≤–∏—à—É –±–µ–∑ –≤—ã–≤–æ–¥–∞ –≤ –∫–æ–Ω—Å–æ–ª—å
                WriteLine($"Key: {key.Key}, Char: {key.KeyChar}, Modifiers: {key.Modifiers}");

                if (key.Key == ConsoleKey.Escape)
                {
                    WriteLine("–í—ã—Ö–æ–¥ –∏–∑ –ø—Ä–æ–≥—Ä–∞–º–º—ã...");
                    break;
                }
            }

            // –¢—É—Ç –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –¥—Ä—É–≥–æ–π –∫–æ–¥, –Ω–∞–ø—Ä–∏–º–µ—Ä –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
            Thread.Sleep(100); // –ó–∞–¥–µ—Ä–∂–∫–∞, —á—Ç–æ–±—ã –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞–ª—Å—è
        }
    }
}
```
üëâ –≠—Ç–æ—Ç –∫–æ–¥ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è, –µ—Å–ª–∏ –∫–ª–∞–≤–∏—à–∞ –Ω–µ –Ω–∞–∂–∞—Ç–∞. –û–Ω –ø—Ä–æ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–∞–∂–∏–º–∞–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–Ω–æ–ø–∫—É.

#### –í–æ–∑–º–æ–∂–Ω—ã–π –≤—ã–≤–æ–¥ –ø—Ä–æ–≥—Ä–∞–º–º—ã:

```
–ù–∞–∂–∏–º–∞–π—Ç–µ –∫–ª–∞–≤–∏—à–∏ (Esc - –≤—ã—Ö–æ–¥).
Key: S, Char: s, Modifiers: None
Key: F, Char: f, Modifiers: None
Key: S, Char: s, Modifiers: None
Key: D, Char: d, Modifiers: None
Key: F, Char: f, Modifiers: None
Key: H, Char: H, Modifiers: Alt, Shift
Key: J, Char: J, Modifiers: Alt, Shift
Key: K, Char: K, Modifiers: Alt, Shift
Key: L, Char: L, Modifiers: Alt, Shift
Key: Escape, Char: odifiers: None
–í—ã—Ö–æ–¥ –∏–∑ –ø—Ä–æ–≥—Ä–∞–º–º—ã...
```


### `Console.CancelKeyPress` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ Ctrl+C

–ò–Ω–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Å–ª—É—á–∞–π–Ω–æ –Ω–∞–∂–∞—Ç—å **Ctrl + C**, –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –ø—Ä–æ—Å—Ç–æ –∑–∞–∫—Ä–æ–µ—Ç—Å—è. –ù–æ –º—ã –º–æ–∂–µ–º —ç—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å, –¥–æ–±–∞–≤–∏–≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `Console.CancelKeyPress`.

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?**  
–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç **Ctrl + C**, —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ `Console.CancelKeyPress`, –∏ –º—ã –º–æ–∂–µ–º –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –µ–≥–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–∫–∞–∑–∞–≤ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –≤—ã—Ö–æ–¥–æ–º.

#### –ü—Ä–∏–º–µ—Ä:
```c#
using System;

class Program
{
    static void Main()
    {
        Console.CancelKeyPress += (sender, e) =>
        {
            Console.WriteLine("\n–í—ã –Ω–∞–∂–∞–ª–∏ Ctrl+C. –ü—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –±—É–¥–µ—Ç –∑–∞–∫—Ä—ã—Ç–∞!");
            e.Cancel = true; // –û—Ç–º–µ–Ω—è–µ–º –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã
        };

        Console.WriteLine("–ù–∞–∂–º–∏—Ç–µ Ctrl+C, —á—Ç–æ–±—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –Ω–∞–∂–∞—Ç–∏—è.");

        while (true)
        {
            // –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª, —á—Ç–æ–±—ã –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –∑–∞–≤–µ—Ä—à–∞–ª–∞—Å—å —Å—Ä–∞–∑—É
        }
    }
}
```
üëâ –¢–µ–ø–µ—Ä—å –ø—Ä–æ–≥—Ä–∞–º–º–∞ **–Ω–µ –∑–∞–∫—Ä–æ–µ—Ç—Å—è –ø—Ä–∏ Ctrl+C**, –∞ –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∂–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ.

### üöÄ –ú–∏–Ω–∏-–∏–≥—Ä–∞: –ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –∫–æ—Ä–∞–±–ª—å –ø—Ä–æ—Ç–∏–≤ –º–µ—Ç–µ–æ—Ä–∏—Ç–æ–≤

–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π —Å–æ–∑–¥–∞–¥–∏–º **–ø—Ä–æ—Å—Ç–µ–Ω—å–∫—É—é –∫–æ–Ω—Å–æ–ª—å–Ω—É—é –∏–≥—Ä—É**, –≥–¥–µ —Ç—ã —É–ø—Ä–∞–≤–ª—è–µ—à—å **–∫–æ—Å–º–∏—á–µ—Å–∫–∏–º –∫–æ—Ä–∞–±–ª—ë–º (<=!=>)**, —Å—Ç—Ä–µ–ª—è–µ—à—å —Å–Ω–∞—Ä—è–¥–∞–º–∏ `!` –∏ —Å–±–∏–≤–∞–µ—à—å –ø–∞–¥–∞—é—â–∏–µ –º–µ—Ç–µ–æ—Ä–∏—Ç—ã `*`. –¢—ã –∂–µ, –ø–∞–¥–∞–≤–∞–Ω! –ó–≤—ë–∑–¥–Ω—ã–π –±–æ–µ—Ü!

**üìå –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–≥—Ä–∞?**
- –ö–æ—Ä–∞–±–ª—å –¥–≤–∏–≥–∞–µ—Ç—Å—è **—Å—Ç—Ä–µ–ª–∫–∞–º–∏ –≤–ª–µ–≤–æ –∏ –≤–ø—Ä–∞–≤–æ**.
- –í—ã—Å—Ç—Ä–µ–ª ‚Äî **–ø—Ä–æ–±–µ–ª**.
- –ú–µ—Ç–µ–æ—Ä–∏—Ç—ã –ø–∞–¥–∞—é—Ç —Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑.
- –ï—Å–ª–∏ –º–µ—Ç–µ–æ—Ä–∏—Ç –¥–æ–ª–µ—Ç–∞–µ—Ç –¥–æ –Ω–∏–∂–Ω–µ–π –ª–∏–Ω–∏–∏ `=`, –æ–Ω –µ—ë —Ä–∞–∑—Ä—É—à–∞–µ—Ç (`=` ‚Üí `+`).
- –ï—Å–ª–∏ —Å–Ω–∞—Ä—è–¥ `!` –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –º–µ—Ç–µ–æ—Ä–∏—Ç `*`, –º–µ—Ç–µ–æ—Ä–∏—Ç –∏—Å—á–µ–∑–∞–µ—Ç, –Ω–æ —Å–ø–µ—Ä–≤–∞ –≤—ã–∑—Ä—ã–≤–µ–µ—Ç—Å—è, –Ω–∞ –µ–≥–æ –º–µ—Å—Ç–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—Ä–æ —Ä–∏—Å—É—é—Ç—Å—è o –∑–∞—Ç–µ–º O  –∏ –∑–∞—Ç–µ–º 0
- –í —Å–∞–º–æ–º –Ω–∏–∂—É –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è –¥–æ–ª–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–±–∏—Ç—ã—Ö –º–µ—Ç–µ–æ—Ä–∏—Ç–æ–≤.
- –ò–≥—Ä–∞ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ –≤—Å–µ –º–µ—Ç–µ–æ—Ä–∏—Ç—ã —Å–±–∏—Ç—ã. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Ç–µ–æ—Ä–∏—Ç–æ–≤ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 100.
- –ï—Å–ª–∏ –Ω–µ –≤—Å–µ –∑–Ω–∞–∫–∏ = —Ä–∞–∑—Ä—É—à–µ–Ω—ã, —Ç–æ —ç—Ç–æ –ø–æ–±–µ–¥–∞.
- –ï—Å–ª–∏ –º–µ—Ç–µ–æ—Ä–∏—Ç –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –∫–æ—Ä–∞–±–ª—å, —Ç–æ –∫–æ—Ä–∞–±–ª—å —É–Ω–∏—á—Ç–æ–∂–∞–µ—Ç—Å—è –∏ –∏–≥—Ä–∞ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è. –≠—Ç–æ –ø—Ä–æ–∞–∂–µ–Ω–∏–µ.

–°–æ–∑–¥–∞–π –∫–æ–Ω—Å–æ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ `ex0079_star_defender` –ø—Ä–∏ –ø–æ–º–æ—â–∏ —à–∞–±–ª–æ–Ω–∞ `tinyconsole` –≤ –ø–∞–ø–∫–µ `episode02` –∏ –¥–æ–±–∞–≤—å –µ–≥–æ –≤
—Ñ–∞–π–ª —Ä–µ—à–µ–Ω–∏—è `episode02.sln`. –≠—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∫–∞–∫ –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ, —Ç–∞–∫ –∏ –≤ –ª—é–±–æ–π IDE.

–ü—Ä–∏–≤–µ–¥–∏ Program.cs –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –≤–∏–¥—É:

```c#
using System;
using System.Threading;
using System.Collections.Generic;

class SpaceGame
{
    static int width, height;
    static int shipX;
    static List<int[]> bullets = new List<int[]>();
    static List<int[]> meteors = new List<int[]>();
    static int meteorsDestroyed = 0;
    static int totalMeteors = 100;
    static char[,] field;
    static bool gameOver = false;
    static bool shipDestroyed = false;
    static List<int[]> explosions = new List<int[]>();
    static int shipExplosionStep = 0;
    static int meteorFallSpeed = 0;
    static HashSet<int> destroyedShieldPositions = new HashSet<int>();

    static void Main()
    {
        Clear();
        CursorVisible = false;

        width = WindowWidth;
        height = WindowHeight - 1;
        shipX = width / 2;

        field = new char[height, width];

        Thread inputThread = new Thread(ReadInput);
        inputThread.Start();

        while (!gameOver)
        {
            UpdateGame();
            DrawGame();
            Thread.Sleep(200);
        }

        SetCursorPosition(0, height / 2);
        WriteLine(shipDestroyed ? "–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!" : "–í—ã –ø–æ–±–µ–¥–∏–ª–∏!");
    }

    static void ReadInput()
    {
        while (!gameOver && !shipDestroyed)
        {
            if (KeyAvailable)
            {
                ConsoleKeyInfo key = ReadKey(true);
                if (key.Key == ConsoleKey.LeftArrow && shipX > 1) shipX--;
                if (key.Key == ConsoleKey.RightArrow && shipX < width - 5) shipX++;
                if (key.Key == ConsoleKey.Spacebar) bullets.Add(new int[] { height - 3, shipX + 2 });
            }
        }
    }

    static void UpdateGame()
    {
        for (int y = 0; y < height; y++)
            for (int x = 0; x < width; x++)
                field[y, x] = ' ';

        if (!shipDestroyed && meteors.Count < totalMeteors && new Random().Next(0, 10) == 0)
        {
            int meteorX = new Random().Next(2, width - 2);
            meteors.Add(new int[] { 0, meteorX });
        }

        meteorFallSpeed++;
        if (meteorFallSpeed % 2 == 0)
        {
            for (int i = meteors.Count - 1; i >= 0; i--)
            {
                meteors[i][0]++;
                if (meteors[i][0] >= height - 2)
                {
                    destroyedShieldPositions.Add(meteors[i][1]);
                    meteors.RemoveAt(i);
                }
            }
        }

        for (int i = bullets.Count - 1; i >= 0; i--)
        {
            bullets[i][0]--;
            if (bullets[i][0] < 0) bullets.RemoveAt(i);
        }

        for (int i = meteors.Count - 1; i >= 0; i--)
        {
            for (int j = bullets.Count - 1; j >= 0; j--)
            {
                if (meteors[i][0] == bullets[j][0] && meteors[i][1] == bullets[j][1])
                {
                    explosions.Add(new int[] { meteors[i][0], meteors[i][1], 0 });
                    meteors.RemoveAt(i);
                    bullets.RemoveAt(j);
                    meteorsDestroyed++;
                    break;
                }
            }
        }

        for (int i = explosions.Count - 1; i >= 0; i--)
        {
            explosions[i][2]++;
            if (explosions[i][2] > 2) explosions.RemoveAt(i);
        }

        foreach (var meteor in meteors)
        {
            if (meteor[0] == height - 3 && (meteor[1] >= shipX && meteor[1] <= shipX + 4))
            {
                shipDestroyed = true;
                return;
            }
        }

        foreach (var meteor in meteors)
        {
            if (meteor[0] == height - 2)
                destroyedShieldPositions.Add(meteor[1]);
        }

        if (!shipDestroyed && meteorsDestroyed >= totalMeteors)
        {
            bool hasShieldLeft = false;
            for (int x = 0; x < width; x++)
            {
                if (!destroyedShieldPositions.Contains(x))
                {
                    hasShieldLeft = true;
                    break;
                }
            }

            if (hasShieldLeft)
            {
                gameOver = true;
                return;
            }
        }

        foreach (var meteor in meteors) field[meteor[0], meteor[1]] = '*';

        foreach (var bullet in bullets) field[bullet[0], bullet[1]] = '!';

        foreach (var explosion in explosions)
        {
            char explosionChar = explosion[2] switch
            {
                0 => 'o',
                1 => 'O',
                _ => '0',
            };
            field[explosion[0], explosion[1]] = explosionChar;
        }

        if (shipDestroyed)
        {
            if (shipExplosionStep < 4)
            {
                char[] explosionStages = { '_', '=', '+', '*' };
                for (int i = 0; i < 5; i++)
                    field[height - 3, shipX + i] = explosionStages[shipExplosionStep];
                shipExplosionStep++;
            }
            else
            {
                gameOver = true;
            }
        }
        else
        {
            int shipY = height - 3;
            field[shipY, shipX] = '<';
            field[shipY, shipX + 1] = '=';
            field[shipY, shipX + 2] = '!';
            field[shipY, shipX + 3] = '=';
            field[shipY, shipX + 4] = '>';
        }

        for (int x = 0; x < width; x++)
            field[height - 2, x] = destroyedShieldPositions.Contains(x) ? '+' : '=';

        string score = $"–°–±–∏—Ç—ã–µ –º–µ—Ç–µ–æ—Ä–∏—Ç—ã: {meteorsDestroyed}/{totalMeteors}";
        for (int i = 0; i < score.Length && i < width; i++)
            field[height - 1, i] = score[i];
    }

    static void DrawGame()
    {
        SetCursorPosition(0, 0);
        for (int y = 0; y < height; y++)
        {
            for (int x = 0; x < width; x++)
                Write(field[y, x]);
            WriteLine();
        }
    }
}
```

‚úÖ **–í –±–æ–π, –ø–∞–¥–≤–∞–Ω!** üöÄüí•

–ó–∞–ø—É—Å—Ç–∏ –∏–≥—Ä—É –≤ –∫–æ–Ω—Å–æ–ª–∏ `dotnet run`.

–í–æ–∑–º–æ–∂–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –∏–≥—Ä—ã —É —Ç–µ–±—è –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –∫–æ–Ω—Å–æ–ª–∏.

![–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –∫–æ—Ä–∞–±–ª—å –ø—Ä–æ—Ç–∏–≤ –º–µ—Ç–µ–æ—Ä–∏—Ç–æ](ex0079_starDefender.png){ border-effect="line"  thumbnail="true" width="700" }

–ö–æ–¥ –∏–≥—Ä—ã –ø–æ–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–µ–±–µ –Ω–µ –ø–æ–Ω—è—Ç–µ–Ω. –ü—Ä–æ—Å—Ç–æ –Ω–∞—Å–ª–∞–∂–¥–∞–π—Å—è –∏–≥—Ä–æ–π, –ø–∞–¥–≤–∞–Ω! –ò –¥–∞ –ø—Ä–µ–±—É–¥–µ—Ç —Å —Ç–æ–±–æ–π –°–∏–ª–∞!