# Получаем нажатую клавишу в C#

Иногда в приложении бывает нужно получить информацию о нажатых пользователем клавишах. Для этого используется метод [ReadKey()](https://learn.microsoft.com/ru-ru/dotnet/api/system.console.readkey).

## Что такое ReadKey() и зачем он нужен? {id="readkey_1"}

Метод `ReadKey()` в C# используется для считывания нажатой клавиши от пользователя в консольном приложении. Когда программа вызывает `ReadKey()`, она останавливается и ждёт, пока пользователь нажмёт любую клавишу. После этого метод возвращает информацию о нажатой клавише.

Представьте, что ваш компьютер спрашивает: *"Какая клавиша была нажата?"* – и ждёт ответа. Как только вы нажмёте, например, `A`, программа узнает об этом и может использовать эту информацию, например, для управления персонажем в игре или для выполнения команд.

## Как работает ReadKey()? {id="readkey_2"}

Вот простой пример кода:

```c#
using System;

class Program
{
    static void Main()
    {
        Console.Write("Нажмите любую клавишу: ");
        ConsoleKeyInfo key = Console.ReadKey(); // Ожидание ввода
        Console.WriteLine();
        Console.WriteLine("Вы нажали: {0}", key.Key);
    }
}
```

Когда программа доходит до `Console.ReadKey()`, она останавливается и ждёт ввода. Если вы нажмёте `B`, программа выведет:

```
Нажмите любую клавишу: B
Вы нажали: B
```

## Что ещё можно узнать о нажатой клавише?

Метод `ReadKey()` возвращает объект `ConsoleKeyInfo`, который содержит три важных свойства:
- `Key` – какая клавиша была нажата (например, `A`, `Enter`, `F1`).
- `KeyChar` – символ, который соответствует нажатой клавише (например, `a`, `b`, `1`).
- `Modifiers` – были ли нажаты дополнительные клавиши, такие как `Shift`, `Ctrl` или `Alt`.

Пример:
```c#
ConsoleKeyInfo key = Console.ReadKey();
Console.WriteLine("Key: {0}, Char: {1}, Modifiers: {2}", key.Key, key.KeyChar, key.Modifiers);
```

Если вы нажмёте `Shift + K`, программа выведет:
```
Key: K, Char: K, Modifiers: Shift
```

Если вы нажмёте `F12`, программа выведет:
```
Key: F12, Char: , Modifiers: 0
```
(символ отсутствует, потому что `F12` – функциональная клавиша, и у неё нет текстового представления).

## Где можно использовать ReadKey()?

Метод `ReadKey()` полезен в:
- В консольных играх (но совместно с медодом `Console.KeyAvailable()`), где игрок управляет персонажем, например, двигает космический корабль и стреляет в метеориты.
- В консольных программах с интерактивным меню, где пользователь выбирает опции с клавиатуры.
- Консольных утилитах, которые ожидают подтверждения перед продолжением.

Практика!

Создай консольное приложение `ex0077_readkey` при помощи шаблона `tinyconsole` в папке `episode02` и добавь его в
файл решения `episode02.sln`. Это можно сделать как в командной строке, так и в любой IDE.

Приведи Program.cs к следующему виду:

```c#
using System;

class Program
{
    static void Main()
    {
        WriteLine("Нажимайте клавиши. Для выхода нажмите Esc.");
        
        while (true)
        {
            ConsoleKeyInfo key = ReadKey(true); // true означает, что клавиша не будет отображаться в консоли
            WriteLine("Key: {0}, Char: {1}, Modifiers: {2}", key.Key, key.KeyChar, key.Modifiers);
            
            if (key.Key == ConsoleKey.Escape)
            {
                WriteLine("Вы нажали Esc. Завершаем программу...");
                break;
            }
        }
    }
}
```

Теперь программа будет постоянно выводить информацию о нажатых клавишах, пока вы не нажмёте `Esc`.

#### Пример вывода программы:

```
Нажимайте клавиши. Для выхода нажмите Esc.
Key: A, Char: A, Modifiers: Shift
Key: F, Char: f, Modifiers: Alt
Key: H, Char:, Modifiers: Shift, Control
Key: Z, Char: , Modifiers: Alt, Shift, Control
Key: D, Char: , Modifiers: Alt, Shift, Control
Key: Escape, Char: odifiers: None
Вы нажали Esc. Завершаем программу...
```

> Внимани! Если вы будете запускать программу из какой-либо IDE, в Windows Terminal или даже консоли cmd Windows, то эти программы могут 
> перехватывать нажатия некоторых комбинаций клавиш. Которые могут являться их горячими клавишами. Поэтому
> программа может их не отображать.
> {style="warning"}
